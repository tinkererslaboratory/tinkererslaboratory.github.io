<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Improving ADCs by intentionally adding noise &#8211; Electronics and Robotics Club, IIT Bombay</title>
<meta name="description" content="How noise addition helps in increasing accuracy of Analog to Digital conversion">
<meta name="keywords" content="ADC, Dither">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Improving ADCs by intentionally adding noise">
<meta name="twitter:description" content="How noise addition helps in increasing accuracy of Analog to Digital conversion">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://grubdragon.github.io/erciitb/images/sitelogo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Improving ADCs by intentionally adding noise">
<meta property="og:description" content="How noise addition helps in increasing accuracy of Analog to Digital conversion">
<meta property="og:url" content="https://grubdragon.github.io/erciitb/blog/informative/improving-adcs-with-noise/">
<meta property="og:site_name" content="Electronics and Robotics Club, IIT Bombay">





<link rel="canonical" href="https://grubdragon.github.io/erciitb/blog/informative/improving-adcs-with-noise/">
<link href="https://grubdragon.github.io/erciitb/feed.xml" type="application/atom+xml" rel="alternate" title="Electronics and Robotics Club, IIT Bombay Feed">
<link href="https://fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css?family=EB+Garamond" rel="stylesheet"> 

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://grubdragon.github.io/erciitb/assets/css/main.css">
<link rel="stylesheet" href="https://grubdragon.github.io/erciitb/assets/css/team.css"> 
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="https://grubdragon.github.io/erciitb/assets/js/vendor/html5shiv.min.js"></script>
  <script src="https://grubdragon.github.io/erciitb/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<!-- Modernizr -->
<script src="https://grubdragon.github.io/erciitb/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://grubdragon.github.io/erciitb/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://grubdragon.github.io/erciitb/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://grubdragon.github.io/erciitb/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://grubdragon.github.io/erciitb/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://grubdragon.github.io/erciitb/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://grubdragon.github.io/erciitb/images/apple-touch-icon-144x144-precomposed.png">

<script src="https://grubdragon.github.io/erciitb/assets/js/scrolltop.js"></script>
<link rel="stylesheet" href="https://grubdragon.github.io/erciitb/assets/css/scrolltop.css">
</head>

<body id="post">
<!-- Return to Top -->
<div onClick="scrollback()" id="return-to-top"><i class="fa fa-chevron-up"></i></div>

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="https://grubdragon.github.io/erciitb/" >Home</a></li>
		  
		    
		    <li><a href="https://grubdragon.github.io/erciitb/about/" >About</a></li>
		  
		    
		    <li><a href="https://grubdragon.github.io/erciitb/tutorials/" >Tutorials</a></li>
		  
		    
		    <li><a href="https://grubdragon.github.io/erciitb/blog/" >Blog</a></li>
		  
		    
		    <li><a href="https://grubdragon.github.io/erciitb/search/" >Search</a></li>
		  
		    
		    <li><a href="https://grubdragon.github.io/erciitb/team/" >The Team</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="https://grubdragon.github.io/erciitb/" class="site-logo" rel="home" title="Electronics and Robotics Club, IIT Bombay"><img src="https://grubdragon.github.io/erciitb/images/sitelogo.png" width="200" height="200" alt="Electronics and Robotics Club, IIT Bombay logo" class="animated flipInX"></a>
      
      <h1 class="site-title animated pulse"><a href="https://grubdragon.github.io/erciitb/">Electronics and Robotics Club, IIT Bombay</a></h1>
		<h2 class="site-description animated pulse" itemprop="description">A place for tinkerers and the sort!</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>

<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper zoomIn">
      <header class="entry-header center">
        
          <h1 class="entry-title">Improving ADCs by intentionally adding noise</h1>
        
      </header>
      <footer class="entry-meta">
        
        <!--
        
        -->
        <span class="author vcard">By <span class="fn">Meet Udeshi</span></span>
        <span class="entry-date date published"><time datetime="2016-10-29T00:00:00+00:00"><i class="fa fa-calendar-o"></i> October 29, 2016</time></span>
        
        
        
	<ul class="entry-tags">
          Tags: <li><a href="https://grubdragon.github.io/erciitb/tags/#ADC" title="Pages tagged ADC">ADC</a></li><li><a href="https://grubdragon.github.io/erciitb/tags/#Dither" title="Pages tagged Dither">Dither</a></li>
        </ul>
      </footer> 
      <div class="entry-content">
        <p>Everybody has this presumed notion that noise in an electronic system is bad.
We all learn about ways to reduce noise in the circuits we implement to get
better results. In this post we will see a case where intentionally <em>adding</em>
noise to a system will give better results.</p>

<h2 id="what-is-wrong-with-a-normal-adc">What is wrong with a normal ADC?</h2>

<p>The purpose of an Analog to Digital converter is to obtain a digital value of
an analog signal. Lets say we want to convert a signal which is between -1 to 1V.
The analog version of this signal will be a real number and so can take one
of infinitely many real values between -1 and 1. But the digital representation
will only be able to take finite number of values because we only have a finite
number of bits to encode the real number.</p>

<p>We will have to <em>quantize</em> the signal i.e. pick the closest possible
approximation of it from the set of possible values. For the sake of simplicity,
lets assume we have just 1 bit to encode the signal. So the set of values our 
digital signal can take is <script type="math/tex">\{0, 1\}</script>. Now it is clear that depending on the
analog value we will have to <em>pick</em> one of 0 or 1 to represent this value as
our digital signal. The analog signal will almost never equal to -1 or 1
(try calculating the probability) so we will always get an error when we
try to <em>quantize</em> our signal. This error is called <strong>Quantization Error</strong>.</p>

<h2 id="there-is-already-an-error-and-you-want-to-add-more-noise">There is already an error and you want to add more noise?!</h2>

<p>We will eventually see that intentionally adding noise will help <em>reduce</em>
quantization error. This kind of intentionally added noise is so commonly used
that it has its own name: Dither. Dither, apart from being used in ADCs is
very widely used in image processing to display better quality images.
See an example from <a href="https://en.wikipedia.org/wiki/Dither">the wikipedia page</a>:</p>

<p><img src="//upload.wikimedia.org/wikipedia/commons/5/57/1_bit.png" alt="dithered leaf" /></p>

<p>The image of this leaf has been represented using just the colour white(1) and
black(0)! And yet it looks like it has various shades of grey! Lets see how
this happens.</p>

<h2 id="dither-in-adcs">Dither in ADCs</h2>

<p>Continuing with the quantization example above, lets say we have a 1-bit ADC
which gives output 0 if the input signal is negative and 1 if positive.
If <script type="math/tex">X</script> is the digital output and <script type="math/tex">c</script> is the analog input (assumed constant),</p>

<script type="math/tex; mode=display">% <![CDATA[
X = 
\begin{cases} 
\hfill 0 \hfill & \text{ if $c \leq 0$} \\
\hfill 1 \hfill & \text{ if $c > 0$} \\
\end{cases}
, c \in [-1,1] %]]></script>

<p>If we add a dither <script type="math/tex">d(t)</script> to the analog input, the value of <script type="math/tex">X</script> will be
decided by <script type="math/tex">c+d(t)</script>. Lets say we add a dither which is characterised by a 
<a href="https://en.wikipedia.org/wiki/Uniform_distribution_(continuous)">uniform random variable</a>, so</p>

<script type="math/tex; mode=display">d \sim \text{U}(-\frac{1}{2},\frac{1}{2})</script>

<p>we will later see the significance of the range <script type="math/tex">-\frac{1}{2},\frac{1}{2}</script>.
Cumulative density function of <script type="math/tex">d</script> will be</p>

<script type="math/tex; mode=display">F_d(x) = x + \frac{1}{2}, x \in [-\frac{1}{2},\frac{1}{2}]</script>

<p><script type="math/tex">X</script> is dependent on a random variable, hence <script type="math/tex">X</script> will also become a random
variable. And because <script type="math/tex">X \in \{0,1\}</script> it will be a <a href="https://en.wikipedia.org/wiki/Bernoulli_distribution">Bernoulli random variable</a></p>

<p>Hence,</p>

<script type="math/tex; mode=display">X \sim \text{Ber}(p)</script>

<script type="math/tex; mode=display">% <![CDATA[
\begin{split}
P(X = 1) & = P(c+d(t) > 0) = p \\
 & = P(d(t) > -c) \\
 & = 1 - P(d(t) \leq -c) \\
 & = 1 - F_d(-c) \\
 & = F_d(c) \\
 & = c + \frac{1}{2}
\end{split} %]]></script>

<p>We get <script type="math/tex">X</script> to be a be a bernoulli variable with parameter dependent on our analog
value!</p>

<script type="math/tex; mode=display">X \sim \text{Ber}(c+\frac{1}{2})</script>

<p>We can see that expected value of <script type="math/tex">X</script> is equal to <script type="math/tex">c + \frac{1}{2}</script> (because X is bernoulli).
By the law of large numbers, we can say that if we take large number of samples of
<script type="math/tex">X</script> (keeping <script type="math/tex">c</script> constant), the average value of these samples will converge
to the expected value <script type="math/tex">c + \frac{1}{2}</script></p>

<h2 id="block-diagram-for-adding-dither">Block diagram for adding dither</h2>

<p><img src="https://grubdragon.github.io/erciitb/assets/blog/improving-adcs-with-noise/block_diag.png" alt="block diagram" /></p>

<p>The Sampler just reads the value of its input at <script type="math/tex">t = nT</script>, hence it gives
a sample at every <script type="math/tex">T</script> seconds. From our previous derivation we can say that</p>

<script type="math/tex; mode=display">\lim_{n\to\infty} \frac{1}{n}\sum_{n=0}^1 X[n] = c + \frac{1}{2}</script>

<p>The problem here is that taking an infinite number of samples will take infinite
time which is impractical. But we can say that the larger number of samples we
the better accuracy in value of <script type="math/tex">c</script> we will get. 
If we take <script type="math/tex">n</script> samples, we can see that the average of <script type="math/tex">X[n]</script> will take one
of <script type="math/tex">n</script> values from the set <script type="math/tex">\{0,\frac{1}{n},\frac{2}{n},...,\frac{n}{n}\}</script>.</p>

<p>We thus have quantized <script type="math/tex">c</script> to <script type="math/tex">n</script> distinct values or <script type="math/tex">\text{log}_2(n)</script> bits
using a 1-bit ADC!</p>

<h2 id="dither-in-images">Dither in images</h2>

<p>Lets take a look at the leaf image once again. Observe that a greyscale image has
been approximated here using two distinct values (black and white) i.e. a 1-bit value.
Such an image is called a binary image.</p>

<p><img src="//upload.wikimedia.org/wikipedia/commons/5/57/1_bit.png" alt="dithered leaf" /></p>

<p>Lets say the greyscale had values for every pixel as a real number
between 0 and 1, 0 corresponding to full black and 1 corresponding to full white.
There would be regions in this image with similar values of grey. For e.g.
take the section of the top of the leaf. It is a region of light grey (value<script type="math/tex">=c>\frac{1}{2}</script>).
If we convert this region directly to binary, the whole region will become white.
Similarly we would get a large patches of black and white all over the image 
which would be a pretty inaccurate depiction of the greyscale image.</p>

<p>Now if we add dither to that small region of similar greyscale value 
and then convert to binary image, the probability of getting a white pixel
will be proportional to the value of that region (<script type="math/tex">=c</script>). If the region has 100
pixels, instead of all 100 being converted to white pixels, <script type="math/tex">100c</script> pixels will be
white and <script type="math/tex">100(1-c)</script> will be black. On average that will look like the region is
grey with value <script type="math/tex">c</script>.</p>

<p>We can say that the average value of a small region in the binary image will be 
close to the greyscale value of that small region in the real image.
Hence we can see that dither gives us a better approximation after quantization.</p>

<p><em>Note: The leaf image is using a slightly better algorithm than just adding dither
and converting to binary (Random dithering). Such an image would look much worse, so for representative
purposes I have used this image. You can read more about better algorithms on the
wikipedia page of Dither</em></p>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="https://grubdragon.github.io/erciitb/blog/projects/get-electrified-2/" class="btn" title="Get Electrified 2">Previous</a>
      
      
        <a href="https://grubdragon.github.io/erciitb/blog/robotic_arm/" class="btn" title="Experiences with Robotic Arm">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2017 Electronics and Robotics Club, IIT Bombay.<!-- Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple Theme</a>.--></span>
<div class="social-icons">
	
	<a href="https://facebook.com/erciitb" title="Electronics and Robotics Club, IIT Bombay on Facebook" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a>
	
	
	
	
	
	<a href="https://github.com/erciitb" title="Electronics and Robotics Club, IIT Bombay on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="https://grubdragon.github.io/erciitb/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'https://grubdragon.github.io/erciitb';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://grubdragon.github.io/erciitb/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://grubdragon.github.io/erciitb/assets/js/scripts.min.js"></script>




</body>
</html>